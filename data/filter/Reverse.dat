program Reverse
  M1 <- 21845;  {- 0101010101010101 -}
  M2 <- 13107;  {- 0011001100110011 -}
  M3 <- 3855;   {- 0000111100001111 -}
  M4 <- 255;    {- 0000000011111111 -}

  i <- 16;
  while i do
     n <- RECEIVE[0];
     n <- ((n & M1) << 1) | ((n >> 1) & M1);
     n <- ((n & M2) << 2) | ((n >> 2) & M2);
     n <- ((n & M3) << 4) | ((n >> 4) & M3);
     n <- ((n & M4) << 8) | ((n >> 8) & M4);
     SEND n;
     i <- i - 1;
   end-while
end-program
